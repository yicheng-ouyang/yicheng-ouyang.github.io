require=function n(h,r,c){function a(i,t){if(!r[i]){if(!h[i]){var o="function"==typeof require&&require;if(!t&&o)return o(i,!0);if(p)return p(i,!0);var e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}var s=r[i]={exports:{}};h[i][0].call(s.exports,function(t){return a(h[i][1][t]||t)},s,s.exports,n,h,r,c)}return r[i].exports}for(var p="function"==typeof require&&require,t=0;t<c.length;t++)a(c[t]);return a}({Audio:[function(t,i,o){"use strict";cc._RF.push(i,"caf47wZzjlOZ7aLj7c3VJ6r","Audio"),cc.Class({extends:cc.Component,properties:{audioSource:{type:cc.AudioSource,default:null}},play:function(){this.audioSource.play()},pause:function(){this.audioSource.pause()},onLoad:function(){this.audioSource=this.getComponent(cc.AudioSource)},start:function(){}}),cc._RF.pop()},{}],BackgroundAnim:[function(t,i,o){"use strict";cc._RF.push(i,"96337cugwZFT4qkOxHJqaUc","BackgroundAnim"),cc.Class({extends:cc.Component,properties:{},play01:function(){this.animState1.isPlaying||this.anim.play("MenuBackground01")},play02:function(){this.animState2.isPlaying||this.anim.play("MenuBackground02")},play03:function(){this.animState3.isPlaying||this.anim.play("MenuBackground03")},play04:function(){this.animState4.isPlaying||this.anim.play("MenuBackground04")},play06:function(){this.animState6.isPlaying||this.anim.play("MenuBackground06")},onLoad:function(){this.anim=this.getComponent(cc.Animation),this.animState3=this.anim.play("MenuBackground03"),this.animState4=this.anim.play("MenuBackground04"),this.animState6=this.anim.play("MenuBackground06"),this.play03()},start:function(){}}),cc._RF.pop()},{}],ButtonHome:[function(t,i,o){"use strict";cc._RF.push(i,"1abceNLhtlGC6x4x9mnweSi","ButtonHome"),cc.Class({extends:cc.Component,properties:{},setListener:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this)},onTouchStart:function(){this.node.color=this.pressed},onTouchEnd:function(){this.node.color=this.released,cc.director.loadScene("StartMenu-new")},onLoad:function(){this.pressed=cc.color(0,0,0),this.released=cc.color(163,163,163),this.node.color=this.released,this.setListener()},start:function(){}}),cc._RF.pop()},{}],ButtonP:[function(t,i,o){"use strict";cc._RF.push(i,"e9d49aLJEVCn7sj9Pkqjk6O","ButtonP"),cc.Class({extends:cc.Component,properties:{},setPosition:function(){this.realWidth=cc.director.getVisibleSize().width,this.realHeight=cc.director.getVisibleSize().height,this.node.x=this.realWidth/2-150,this.node.y=-this.realHeight/2+35},onLoad:function(){this.setPosition()},start:function(){}}),cc._RF.pop()},{}],ButtonReplay:[function(t,i,o){"use strict";cc._RF.push(i,"577d0DuXK9Aor2KsYiPTPJI","ButtonReplay"),cc.Class({extends:cc.Component,properties:{},setListener:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this)},onTouchStart:function(){this.node.color=this.pressed},onTouchEnd:function(){this.node.color=this.released,cc.director.loadScene("Game")},onLoad:function(){this.pressed=cc.color(0,0,0),this.released=cc.color(255,255,255),this.node.color=this.released,this.setListener()},start:function(){}}),cc._RF.pop()},{}],ButtonsL:[function(t,i,o){"use strict";cc._RF.push(i,"8a1ea8aXGpHSKTqHL0OMFfi","ButtonsL"),cc.Class({extends:cc.Component,properties:{hero:cc.Node},setListener:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this)},onTouchStart:function(){this.node.getChildByName("Left").color=this.pressed,this.Hero.jetL=!0},onTouchEnd:function(){this.node.getChildByName("Left").color=this.released,this.Hero.jetL=!1},onLoad:function(){this.Hero=this.hero.getComponent("Hero"),this.pressed=new cc.Color(90,90,90),this.released=new cc.Color(255,255,255),this.setListener()},start:function(){}}),cc._RF.pop()},{}],ButtonsR:[function(t,i,o){"use strict";cc._RF.push(i,"af007F3paBLVK4/t0Gl/XTp","ButtonsR"),cc.Class({extends:cc.Component,properties:{hero:cc.Node},setListener:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this)},onTouchStart:function(){this.node.getChildByName("Right").color=this.pressed,this.Hero.jetR=!0},onTouchEnd:function(){this.node.getChildByName("Right").color=this.released,this.Hero.jetR=!1},onLoad:function(){this.Hero=this.hero.getComponent("Hero"),this.pressed=new cc.Color(90,90,90),this.released=new cc.Color(255,255,255),this.setListener()},start:function(){}}),cc._RF.pop()},{}],ButtonsU:[function(t,i,o){"use strict";cc._RF.push(i,"a05b2zGlRZLnrNBP0ctbY+N","ButtonsU"),cc.Class({extends:cc.Component,properties:{rope:cc.Node},setListener:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this)},onTouchStart:function(){this.node.getChildByName("Upper").color=this.pressed,1==this.action&&(this.Rope.launch(),this.action=!1)},onTouchEnd:function(){this.node.getChildByName("Upper").color=this.released,this.action=!0},onLoad:function(){this.Rope=this.rope.getComponent("Rope"),this.action=!0,this.pressed=new cc.Color(90,90,90),this.released=new cc.Color(255,255,255),this.setListener()},start:function(){}}),cc._RF.pop()},{}],"Camera-menu":[function(t,i,o){"use strict";cc._RF.push(i,"799b6ZVhNBBXbPXDigd0K66","Camera-menu"),cc.Class({extends:cc.Component,properties:{hero:cc.Node,rope:cc.Node,button:cc.Node},detectBounds:function(){this.hero.position.y>=this.node.position.y+240*this.yCorrectionFactor?this.node.setPosition(cc.p(this.node.x,this.hero.y-240*this.yCorrectionFactor)):this.hero.y<=this.node.y-this.yUnderBound?(this.fall=!0,this.preY-this.node.y>=this.maxFallDistance&&0==this.rope.getComponent("Rope").isFixed()?this.gameOver=!0:this.node.setPosition(cc.p(this.node.x,this.hero.y+this.yUnderBound))):this.fall=!1,this.hero.position.x>=this.node.position.x+160?this.node.setPosition(cc.p(this.hero.x-160,this.node.y)):this.hero.position.x<=this.node.position.x-160&&this.node.setPosition(cc.p(this.hero.x+160,this.node.y))},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().attachDebugDrawToCamera(this.node.getComponent(cc.Camera)),cc.director.getCollisionManager().attachDebugDrawToCamera(this.node.getComponent(cc.Camera)),this.preY=this.node.y,this.up=!1,this.gameOver=!1,this.node.setPosition(this.node.x,this.node.y+200)},start:function(){},update:function(t){this.node.setPosition(this.node.x,this.node.y+200*t)}}),cc._RF.pop()},{}],Camera:[function(t,i,o){"use strict";cc._RF.push(i,"9e0c5f/lN1GFqym2RYQzRAU","Camera"),cc.Class({extends:cc.Component,properties:{hero:cc.Node,rope:cc.Node,button:cc.Node},detectBounds:function(){this.hero.position.y>=this.node.position.y+240*this.yCorrectionFactor?this.node.setPosition(cc.p(this.node.x,this.hero.y-240*this.yCorrectionFactor)):this.hero.y<=this.node.y-this.yUnderBound?(this.fall=!0,this.preY-this.node.y>=this.maxFallDistance&&0==this.rope.getComponent("Rope").isFixed()?this.gameOver=!0:this.node.setPosition(cc.p(this.node.x,this.hero.y+this.yUnderBound))):this.fall=!1,this.hero.position.x>=this.node.position.x+160?this.node.setPosition(cc.p(this.hero.x-160,this.node.y)):this.hero.position.x<=this.node.position.x-160&&this.node.setPosition(cc.p(this.hero.x+160,this.node.y))},onLoad:function(){this.windowSize=cc.director.getWinSizeInPixels(),this.yCorrectionFactor=this.windowSize.height/1146,this.yUnderBound=this.windowSize.height/2-(this.button.y+2*this.button.height),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().attachDebugDrawToCamera(this.node.getComponent(cc.Camera)),cc.director.getCollisionManager().attachDebugDrawToCamera(this.node.getComponent(cc.Camera)),this.preY=this.node.y,this.up=!1,this.gameOver=!1,this.maxFallDistance=2*this.windowSize.height/5},start:function(){},update:function(t){this.detectBounds(),this.fall||(this.preY=this.node.y)}}),cc._RF.pop()},{}],Close:[function(t,i,o){"use strict";cc._RF.push(i,"ae9e54Zv5lBV7mX8RHibY9M","Close"),cc.Class({extends:cc.Component,properties:{rope:cc.Node},setListener:function(){this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this)},onTouchEnd:function(){this.node.parent.destroy()},onLoad:function(){this.setListener()},start:function(){}}),cc._RF.pop()},{}],"Game -menu":[function(t,i,o){"use strict";cc._RF.push(i,"32021z0SkxIWbp2U6HgA94S","Game -menu"),cc.Class({extends:cc.Component,properties:{rope:{default:null,type:cc.Node},hero:{default:null,type:cc.Node},background:{default:null,type:cc.Prefab},gameover:cc.Prefab,normal_platform:cc.Prefab,grass_platform:cc.Prefab,ice_platform:cc.Prefab,move_platform:cc.Prefab,vanish_platform:cc.Prefab,spring_platform:cc.Prefab,conveyer_platform:cc.Prefab,rotation_platform:cc.Prefab,bound:cc.Prefab,entity:cc.Node,camera:cc.Node,graphic:cc.Node,back_audio:cc.Node,over_audio:cc.Node,ground_platform:cc.Node,labels:cc.Node,buttons:cc.Node,joysticks:cc.Node},overSky:function(){if(1<=this.backPool.size())this.difficulty+=1,this.back02=this.backPool.get(),4<=this.difficulty&&this.difficulty<=8?this.back02.getChildByName("background").color=new cc.color(209,224,169):9<=this.difficulty&&(this.back02.getChildByName("background").color=new cc.color(169,206,224)),this.node.addChild(this.back02,this.back01.zIndex-1),this.back02.setPosition(this.back01.x,this.back01.y+(this.bgBB.yMax-this.bgBB.yMin)),this.back02.getChildByName("BoundL").getComponent(cc.RigidBody).syncPosition(!1),this.back02.getChildByName("BoundR").getComponent(cc.RigidBody).syncPosition(!1),this.spawnPlatforms(this.back02.y+(this.bgBB.yMax-this.bgBB.yMin)/2,this.back01.width*this.back01.scaleX,this.back01.height*this.back01.scaleY,this.difficulty);else if(0==this.backPool.size()&&this.camera.y+480>=this.back02.y+this.node.y+(this.bgBB.yMax-this.bgBB.yMin)/5*4){this.backPool.put(this.back01),this.back01=this.back02,this.back02=null;for(var t=0;t<this.pfArray01.length;t++)switch(this.pfArray01[t].name){case"P_normal":this.normal_platformPool.put(this.pfArray01[t]);break;case"P_move":this.move_platformPool.put(this.pfArray01[t]);break;case"P_rotation":this.rotation_platformPool.put(this.pfArray01[t]);break;case"P_vanish":this.vanish_platformPool.put(this.pfArray01[t]);break;case"P_conveyer":this.conveyer_platformPool.put(this.pfArray01[t]);break;case"P_spring":this.spring_platformPool.put(this.pfArray01[t]);break;case"P_grass":this.grass_platformPool.put(this.pfArray01[t]);break;case"P_ice":this.ice_platformPool.put(this.pfArray01[t])}this.pfArray01=this.pfArray02,this.pfArray02=null}},createNodePool:function(){this.backPool=new cc.NodePool,this.normal_platformPool=new cc.NodePool,this.grass_platformPool=new cc.NodePool,this.ice_platformPool=new cc.NodePool,this.move_platformPool=new cc.NodePool,this.rotation_platformPool=new cc.NodePool,this.vanish_platformPool=new cc.NodePool,this.conveyer_platformPool=new cc.NodePool,this.spring_platformPool=new cc.NodePool;for(var t=0;t<2;t++){var i=cc.instantiate(this.background);this.backPool.put(i)}for(var o=0;o<20;o++){var e=cc.instantiate(this.normal_platform);this.normal_platformPool.put(e)}for(var s=0;s<20;s++){var n=cc.instantiate(this.grass_platform);this.grass_platformPool.put(n)}for(var h=0;h<20;h++){var r=cc.instantiate(this.ice_platform);this.ice_platformPool.put(r)}for(var c=0;c<5;c++){var a=cc.instantiate(this.move_platform);this.move_platformPool.put(a)}for(var p=0;p<5;p++){var d=cc.instantiate(this.rotation_platform);this.rotation_platformPool.put(d)}for(var f=0;f<5;f++){var l=cc.instantiate(this.vanish_platform);this.vanish_platformPool.put(l)}for(var u=0;u<5;u++){var m=cc.instantiate(this.conveyer_platform);this.conveyer_platformPool.put(m)}for(var y=0;y<5;y++){var g=cc.instantiate(this.spring_platform);this.spring_platformPool.put(g)}},spawnPlatforms:function(t,i,o,e){this.pfArray=new Array,e<=3?0<this.normal_platformPool.size()?this.pfArray[0]=this.normal_platformPool.get():this.pfArray[0]=cc.instantiate(this.normal_platform):4<=e&&e<=8?0<this.grass_platformPool.size()?this.pfArray[0]=this.grass_platformPool.get():this.pfArray[0]=cc.instantiate(this.grass_platform):9<=e&&(0<this.ice_platformPool.size()?this.pfArray[0]=this.ice_platformPool.get():this.pfArray[0]=cc.instantiate(this.ice_platform)),this.node.addChild(this.pfArray[0]),this.pfArray[0].setPosition((i-this.pfArray[0].width*this.pfArray[0].scaleX*3)*cc.randomMinus1To1()/2,t-450),this.pfArray[0].getComponent(cc.RigidBody).syncPosition(!1);for(var s=0;this.pfArray[s].y<=t+o/2-100;){var n=cc.random0To1();s++;var h=Math.PI,r=5*h/6*cc.random0To1()+h/12,c=550<this.rope.scaleY*this.rope.getComponent("Rope").maxHeight+100+20*e?550:this.rope.scaleY*this.rope.getComponent("Rope").maxHeight+100+15*e,a=this.pfArray[s-1].x+c*Math.cos(r),p=this.pfArray[s-1].y+c*Math.sin(r);(a<-i/2+this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2||a>i/2-this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2)&&((a=this.pfArray[s-1].x+(this.pfArray[s-1].x-a))<-i/2+this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2?a=-i/2+this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2:a>i/2-this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2&&(a=i/2-this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2)),t+o/2<p&&(p=t+o/2),n<=.15&&2<=e?0<this.move_platformPool.size()?this.pfArray[s]=this.move_platformPool.get():this.pfArray[s]=cc.instantiate(this.move_platform):.15<n&&n<=.25&&4<=e?0<this.rotation_platformPool.size()?this.pfArray[s]=this.rotation_platformPool.get():this.pfArray[s]=cc.instantiate(this.rotation_platform):.25<n&&n<=.35&&6<=e?0<this.vanish_platformPool.size()?this.pfArray[s]=this.vanish_platformPool.get():this.pfArray[s]=cc.instantiate(this.vanish_platform):.35<n&&n<=.5&&3<=e?0<this.conveyer_platformPool.size()?this.pfArray[s]=this.conveyer_platformPool.get():this.pfArray[s]=cc.instantiate(this.conveyer_platform):.5<n&&n<=.6&&2<=e?0<this.spring_platformPool.size()?this.pfArray[s]=this.spring_platformPool.get():this.pfArray[s]=cc.instantiate(this.spring_platform):e<=3?0<this.normal_platformPool.size()?this.pfArray[s]=this.normal_platformPool.get():this.pfArray[s]=cc.instantiate(this.normal_platform):4<=e&&e<=8?0<this.grass_platformPool.size()?this.pfArray[s]=this.grass_platformPool.get():this.pfArray[s]=cc.instantiate(this.grass_platform):9<=e&&(0<this.ice_platformPool.size()?this.pfArray[s]=this.ice_platformPool.get():this.pfArray[s]=cc.instantiate(this.ice_platform)),this.node.addChild(this.pfArray[s]),this.pfArray[s].setPosition(a,p),this.pfArray[s].getComponent(cc.RigidBody).syncPosition(!1)}null==this.pfArray01?this.pfArray01=this.pfArray:this.pfArray02=this.pfArray},collisionDetect:function(){var t=this.rope.getComponent("Rope"),i=this.rope.height*this.rope.scaleY*Math.cos(t.rad)+this.rope.position.x,o=this.rope.height*this.rope.scaleY*Math.sin(t.rad)+this.rope.position.y,e=cc.p(i,o);if(null!==this.pfArray01)for(var s=0;s<this.pfArray01.length;s++)switch(this.pfArray01[s].name){case"P_rotation":var n=this.pfArray01[s].getComponent("P_rotation"),h=this.pfArray01[s].x+this.xOffset,r=this.pfArray01[s].y+this.yOffset,c=cc.p(h,r),a=cc.pSub(e,c);if(0<n.p1p2.cross(cc.pSub(a,n.p1))*n.p4p3.cross(cc.pSub(a,n.p4))&&0<n.p3p1.cross(cc.pSub(a,n.p3))*n.p2p4.cross(cc.pSub(a,n.p2)))return t.setFixed(),this.pfArray01[s];break;default:var p=this.pfArray01[s].x+this.pfArray01[s].width/2*this.pfArray01[s].scaleX+this.xOffset,d=this.pfArray01[s].x-this.pfArray01[s].width/2*this.pfArray01[s].scaleX+this.xOffset,f=this.pfArray01[s].y+this.pfArray01[s].height/2*this.pfArray01[s].scaleY+this.yOffset,l=this.pfArray01[s].y-this.pfArray01[s].height/2*this.pfArray01[s].scaleY+this.yOffset;if(d<i&&i<p&&l<o&&o<f)return t.setFixed(),this.pfArray01[s]}if(null!==this.pfArray02)for(var u=0;u<this.pfArray02.length;u++)switch(this.pfArray02[u].name){case"P_rotation":var m=this.pfArray02[u].getComponent("P_rotation"),y=this.pfArray02[u].x+this.xOffset,g=this.pfArray02[u].y+this.yOffset,P=cc.p(y,g),_=cc.pSub(e,P);if(0<m.p1p2.cross(cc.pSub(_,m.p1))*m.p4p3.cross(cc.pSub(_,m.p4))&&0<m.p3p1.cross(cc.pSub(_,m.p3))*m.p2p4.cross(cc.pSub(_,m.p2)))return t.setFixed(),this.pfArray02[u];break;default:var A=this.pfArray02[u].x+this.pfArray02[u].width/2*this.pfArray02[u].scaleX+this.xOffset,b=this.pfArray02[u].x-this.pfArray02[u].width/2*this.pfArray02[u].scaleX+this.xOffset,v=this.pfArray02[u].y+this.pfArray02[u].height/2*this.pfArray02[u].scaleY+this.yOffset,x=this.pfArray02[u].y-this.pfArray02[u].height/2*this.pfArray02[u].scaleY+this.yOffset;if(b<i&&i<A&&x<o&&o<v)return t.setFixed(),this.pfArray02[u]}return null},GameOverDetect:function(){if(this.camera.getComponent("Camera").gameOver&&0==this.overTime){this.buttons.active=!1,this.joysticks.active=!1,this.labels.active=!1;var t=cc.instantiate(this.gameover);this.camera.addChild(t),t.setPosition(0,0),t.getChildByName("Score").getComponent(cc.Label).string="Score: "+this.score+"M",this.back_audio.getComponent("Audio").pause(),this.over_audio.getComponent("Audio").play(),this.overTime=1,this.score>cc.sys.localStorage.getItem("heighScore")&&cc.sys.localStorage.setItem("heighScore",this.score),t.getChildByName("H_Score").getComponent(cc.Label).string="Heighest Record:\n"+cc.sys.localStorage.getItem("heighScore")+"M",this.hero.getComponent("Hero").over=!0}},onLoad:function(){this.windowSize=cc.director.getWinSizeInPixels(),cc.director.getPhysicsManager().enabled=!0,this.Rope=this.rope.getComponent("Rope"),this.createNodePool(),this.overTime=0,this.score=0,this.difficulty=1,this.back01=this.backPool.get(),this.bgBB=this.back01.getBoundingBox(),this.node.addChild(this.back01),this.back01.setPosition(-(this.bgBB.xMax-this.bgBB.xMin)/2,this.ground_platform.y-this.node.height/2),this.back01.getChildByName("BoundL").getComponent(cc.RigidBody).syncPosition(!1),this.back01.getChildByName("BoundR").getComponent(cc.RigidBody).syncPosition(!1),this.spawnPlatforms(-this.node.height/2+680,this.camera.width,this.back01.height*this.back01.scaleY,1),this.xOffset=.5*this.windowSize.width,this.yOffset=570/1146*this.windowSize.height},start:function(){},update:function(t){this.score=this.camera.getChildByName("Labels").getChildByName("Scores").getComponent("Score").score,this.overSky(),this.GameOverDetect()}}),cc._RF.pop()},{}],Game:[function(t,i,o){"use strict";cc._RF.push(i,"92d4fLdkwdGm7Y1ftM//RHP","Game"),cc.Class({extends:cc.Component,properties:{rope:{default:null,type:cc.Node},hero:{default:null,type:cc.Node},background:{default:null,type:cc.Prefab},gameover:cc.Prefab,normal_platform:cc.Prefab,grass_platform:cc.Prefab,ice_platform:cc.Prefab,move_platform:cc.Prefab,vanish_platform:cc.Prefab,spring_platform:cc.Prefab,conveyer_platform:cc.Prefab,rotation_platform:cc.Prefab,bound:cc.Prefab,entity:cc.Node,camera:cc.Node,graphic:cc.Node,back_audio:cc.Node,over_audio:cc.Node,ground_platform:cc.Node,labels:cc.Node,buttons:cc.Node,joysticks:cc.Node},overSky:function(){if(1<=this.backPool.size())this.difficulty+=1,this.back02=this.backPool.get(),4<=this.difficulty&&this.difficulty<=8?this.back02.getChildByName("background").color=new cc.color(209,224,169):9<=this.difficulty&&(this.back02.getChildByName("background").color=new cc.color(169,206,224)),this.node.addChild(this.back02,this.back01.zIndex-1),this.back02.setPosition(this.back01.x,this.back01.y+(this.bgBB.yMax-this.bgBB.yMin)),this.back02.getChildByName("BoundL").getComponent(cc.RigidBody).syncPosition(!1),this.back02.getChildByName("BoundR").getComponent(cc.RigidBody).syncPosition(!1),this.spawnPlatforms(this.back02.y+(this.bgBB.yMax-this.bgBB.yMin)/2,this.back01.width*this.back01.scaleX,this.back01.height*this.back01.scaleY,this.difficulty);else if(0==this.backPool.size()&&this.camera.y+480>=this.back02.y+this.node.y+(this.bgBB.yMax-this.bgBB.yMin)/5*4){this.backPool.put(this.back01),this.back01=this.back02,this.back02=null;for(var t=0;t<this.pfArray01.length;t++)switch(this.pfArray01[t].name){case"P_normal":this.normal_platformPool.put(this.pfArray01[t]);break;case"P_move":this.move_platformPool.put(this.pfArray01[t]);break;case"P_rotation":this.rotation_platformPool.put(this.pfArray01[t]);break;case"P_vanish":this.vanish_platformPool.put(this.pfArray01[t]);break;case"P_conveyer":this.conveyer_platformPool.put(this.pfArray01[t]);break;case"P_spring":this.spring_platformPool.put(this.pfArray01[t]);break;case"P_grass":this.grass_platformPool.put(this.pfArray01[t]);break;case"P_ice":this.ice_platformPool.put(this.pfArray01[t])}this.pfArray01=this.pfArray02,this.pfArray02=null}},createNodePool:function(){this.backPool=new cc.NodePool,this.normal_platformPool=new cc.NodePool,this.grass_platformPool=new cc.NodePool,this.ice_platformPool=new cc.NodePool,this.move_platformPool=new cc.NodePool,this.rotation_platformPool=new cc.NodePool,this.vanish_platformPool=new cc.NodePool,this.conveyer_platformPool=new cc.NodePool,this.spring_platformPool=new cc.NodePool;for(var t=0;t<2;t++){var i=cc.instantiate(this.background);this.backPool.put(i)}for(var o=0;o<20;o++){var e=cc.instantiate(this.normal_platform);this.normal_platformPool.put(e)}for(var s=0;s<20;s++){var n=cc.instantiate(this.grass_platform);this.grass_platformPool.put(n)}for(var h=0;h<20;h++){var r=cc.instantiate(this.ice_platform);this.ice_platformPool.put(r)}for(var c=0;c<5;c++){var a=cc.instantiate(this.move_platform);this.move_platformPool.put(a)}for(var p=0;p<5;p++){var d=cc.instantiate(this.rotation_platform);this.rotation_platformPool.put(d)}for(var f=0;f<5;f++){var l=cc.instantiate(this.vanish_platform);this.vanish_platformPool.put(l)}for(var u=0;u<5;u++){var m=cc.instantiate(this.conveyer_platform);this.conveyer_platformPool.put(m)}for(var y=0;y<5;y++){var g=cc.instantiate(this.spring_platform);this.spring_platformPool.put(g)}},spawnPlatforms:function(t,i,o,e){this.pfArray=new Array,e<=3?0<this.normal_platformPool.size()?this.pfArray[0]=this.normal_platformPool.get():this.pfArray[0]=cc.instantiate(this.normal_platform):4<=e&&e<=8?0<this.grass_platformPool.size()?this.pfArray[0]=this.grass_platformPool.get():this.pfArray[0]=cc.instantiate(this.grass_platform):9<=e&&(0<this.ice_platformPool.size()?this.pfArray[0]=this.ice_platformPool.get():this.pfArray[0]=cc.instantiate(this.ice_platform)),this.node.addChild(this.pfArray[0]),this.pfArray[0].setPosition((i-this.pfArray[0].width*this.pfArray[0].scaleX*3)*cc.randomMinus1To1()/2,t-450),this.pfArray[0].getComponent(cc.RigidBody).syncPosition(!1);for(var s=0;this.pfArray[s].y<=t+o/2-100;){var n=cc.random0To1();s++;var h=Math.PI,r=5*h/6*cc.random0To1()+h/12,c=550<this.rope.scaleY*this.rope.getComponent("Rope").maxHeight+100+20*e?550:this.rope.scaleY*this.rope.getComponent("Rope").maxHeight+100+15*e,a=this.pfArray[s-1].x+c*Math.cos(r),p=this.pfArray[s-1].y+c*Math.sin(r);(a<-i/2+this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2||a>i/2-this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2)&&((a=this.pfArray[s-1].x+(this.pfArray[s-1].x-a))<-i/2+this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2?a=-i/2+this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2:a>i/2-this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2&&(a=i/2-this.pfArray[s-1].width*this.pfArray[s-1].scaleX/2)),t+o/2<p&&(p=t+o/2),n<=.15&&2<=e?0<this.move_platformPool.size()?this.pfArray[s]=this.move_platformPool.get():this.pfArray[s]=cc.instantiate(this.move_platform):.15<n&&n<=.25&&4<=e?0<this.rotation_platformPool.size()?this.pfArray[s]=this.rotation_platformPool.get():this.pfArray[s]=cc.instantiate(this.rotation_platform):.25<n&&n<=.35&&6<=e?0<this.vanish_platformPool.size()?this.pfArray[s]=this.vanish_platformPool.get():this.pfArray[s]=cc.instantiate(this.vanish_platform):.35<n&&n<=.5&&3<=e?0<this.conveyer_platformPool.size()?this.pfArray[s]=this.conveyer_platformPool.get():this.pfArray[s]=cc.instantiate(this.conveyer_platform):.5<n&&n<=.6&&2<=e?0<this.spring_platformPool.size()?this.pfArray[s]=this.spring_platformPool.get():this.pfArray[s]=cc.instantiate(this.spring_platform):e<=3?0<this.normal_platformPool.size()?this.pfArray[s]=this.normal_platformPool.get():this.pfArray[s]=cc.instantiate(this.normal_platform):4<=e&&e<=8?0<this.grass_platformPool.size()?this.pfArray[s]=this.grass_platformPool.get():this.pfArray[s]=cc.instantiate(this.grass_platform):9<=e&&(0<this.ice_platformPool.size()?this.pfArray[s]=this.ice_platformPool.get():this.pfArray[s]=cc.instantiate(this.ice_platform)),this.node.addChild(this.pfArray[s]),this.pfArray[s].setPosition(a,p),this.pfArray[s].getComponent(cc.RigidBody).syncPosition(!1)}null==this.pfArray01?this.pfArray01=this.pfArray:this.pfArray02=this.pfArray},collisionDetect:function(){var t=this.rope.getComponent("Rope"),i=this.rope.height*this.rope.scaleY*Math.cos(t.rad)+this.rope.position.x,o=this.rope.height*this.rope.scaleY*Math.sin(t.rad)+this.rope.position.y,e=cc.p(i,o);if(null!==this.pfArray01)for(var s=0;s<this.pfArray01.length;s++)switch(this.pfArray01[s].name){case"P_rotation":var n=this.pfArray01[s].getComponent("P_rotation"),h=this.pfArray01[s].x+this.xOffset,r=this.pfArray01[s].y+this.yOffset,c=cc.p(h,r),a=cc.pSub(e,c);if(0<n.p1p2.cross(cc.pSub(a,n.p1))*n.p4p3.cross(cc.pSub(a,n.p4))&&0<n.p3p1.cross(cc.pSub(a,n.p3))*n.p2p4.cross(cc.pSub(a,n.p2)))return t.setFixed(),this.pfArray01[s];break;default:var p=this.pfArray01[s].x+this.pfArray01[s].width/2*this.pfArray01[s].scaleX+this.xOffset,d=this.pfArray01[s].x-this.pfArray01[s].width/2*this.pfArray01[s].scaleX+this.xOffset,f=this.pfArray01[s].y+this.pfArray01[s].height/2*this.pfArray01[s].scaleY+this.yOffset,l=this.pfArray01[s].y-this.pfArray01[s].height/2*this.pfArray01[s].scaleY+this.yOffset;if(d<i&&i<p&&l<o&&o<f)return t.setFixed(),this.pfArray01[s]}if(null!==this.pfArray02)for(var u=0;u<this.pfArray02.length;u++)switch(this.pfArray02[u].name){case"P_rotation":var m=this.pfArray02[u].getComponent("P_rotation"),y=this.pfArray02[u].x+this.xOffset,g=this.pfArray02[u].y+this.yOffset,P=cc.p(y,g),_=cc.pSub(e,P);if(0<m.p1p2.cross(cc.pSub(_,m.p1))*m.p4p3.cross(cc.pSub(_,m.p4))&&0<m.p3p1.cross(cc.pSub(_,m.p3))*m.p2p4.cross(cc.pSub(_,m.p2)))return t.setFixed(),this.pfArray02[u];break;default:var A=this.pfArray02[u].x+this.pfArray02[u].width/2*this.pfArray02[u].scaleX+this.xOffset,b=this.pfArray02[u].x-this.pfArray02[u].width/2*this.pfArray02[u].scaleX+this.xOffset,v=this.pfArray02[u].y+this.pfArray02[u].height/2*this.pfArray02[u].scaleY+this.yOffset,x=this.pfArray02[u].y-this.pfArray02[u].height/2*this.pfArray02[u].scaleY+this.yOffset;if(b<i&&i<A&&x<o&&o<v)return t.setFixed(),this.pfArray02[u]}return null},GameOverDetect:function(){if(this.camera.getComponent("Camera").gameOver&&0==this.overTime){this.buttons.active=!1,this.joysticks.active=!1,this.labels.active=!1;var t=cc.instantiate(this.gameover);this.camera.addChild(t),t.setPosition(0,0),t.getChildByName("Score").getComponent(cc.Label).string="Score: "+this.score+"M",this.back_audio.getComponent("Audio").pause(),this.over_audio.getComponent("Audio").play(),this.overTime=1,this.score>cc.sys.localStorage.getItem("heighScore")&&cc.sys.localStorage.setItem("heighScore",this.score),t.getChildByName("H_Score").getComponent(cc.Label).string="Heighest Record:\n"+cc.sys.localStorage.getItem("heighScore")+"M",this.hero.getComponent("Hero").over=!0}},onLoad:function(){this.windowSize=cc.director.getWinSizeInPixels(),cc.director.getPhysicsManager().enabled=!0,this.Rope=this.rope.getComponent("Rope"),this.createNodePool(),this.overTime=0,this.score=0,this.difficulty=1,this.back01=this.backPool.get(),this.bgBB=this.back01.getBoundingBox(),this.node.addChild(this.back01),this.back01.setPosition(-(this.bgBB.xMax-this.bgBB.xMin)/2,this.ground_platform.y-this.node.height/2),this.back01.getChildByName("BoundL").getComponent(cc.RigidBody).syncPosition(!1),this.back01.getChildByName("BoundR").getComponent(cc.RigidBody).syncPosition(!1),this.spawnPlatforms(-this.node.height/2+680,this.back01.width*this.back01.scaleX,this.back01.height*this.back01.scaleY,1),this.xOffset=.5*this.windowSize.width,this.yOffset=570/1146*this.windowSize.height},start:function(){},update:function(t){this.score=this.camera.getChildByName("Labels").getChildByName("Scores").getComponent("Score").score,this.overSky(),this.GameOverDetect()}}),cc._RF.pop()},{}],Graphic:[function(t,i,o){"use strict";cc._RF.push(i,"878d7Gr2NpFEK8F8m07PbhV","Graphic"),cc.Class({extends:cc.Component,properties:{rope:{default:null,type:cc.Node},hero:{default:null,type:cc.Node},platforms:{default:[],type:[cc.Node]},canvas:cc.Node,camera:cc.Node},drawCircle:function(t,i,o){var e=this.node.getComponent(cc.Graphics);e.circle(t,i,o),e.stroke()},drawRectangle:function(t,i,o,e){var s=this.node.getComponent(cc.Graphics);s.moveTo(t,o),s.lineTo(t,e),s.lineTo(i,e),s.lineTo(i,o),s.lineTo(t,o),s.stroke()},drawRectangle2:function(t,i,o,e,s,n,h,r){var c=this.node.getComponent(cc.Graphics);c.moveTo(t,i),c.lineTo(o,e),c.lineTo(s,n),c.lineTo(h,r),c.lineTo(t,i),c.stroke()},onLoad:function(){this.node.getComponent(cc.Graphics).lineWidth=1},start:function(){},update:function(t){}}),cc._RF.pop()},{}],Hero:[function(t,i,o){"use strict";cc._RF.push(i,"6fa44IgbX5KKK7BDZveG+qW","Hero"),cc.Class({extends:cc.Component,properties:{jetPower:0,rope:{default:null,type:cc.Node}},setListener:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.t:this.jetU=!0;break;case cc.KEY.a:this.jetL=!0;break;case cc.KEY.d:this.jetR=!0}},onKeyUp:function(t){switch(t.keyCode){case cc.KEY.t:this.jetU=!1;break;case cc.KEY.a:this.jetL=!1;break;case cc.KEY.d:this.jetR=!1}},jetLaunch:function(t){1==this.jetL&&0==this.over?this.node.getComponent(cc.RigidBody).applyForceToCenter(cc.p(-this.jetPower,0),!0):1==this.jetR&&0==this.over?this.node.getComponent(cc.RigidBody).applyForceToCenter(cc.p(this.jetPower,0),!0):1==this.jetU&&this.node.getComponent(cc.RigidBody).applyForceToCenter(cc.p(0,this.jetPower),!0)},onEndContact:function(t,i,o){"Grabable"==o.node.group&&(this.InAir=!0),"P_conveyer"==o.node.name&&(this.P_conMove=!1)},Anim:function(){this.InAir?0<this.Rigid.linearVelocity.dot(cc.p(0,-1))&&0==this.Rope.isFixed()?(this.node.width=55,this.node.height=105,this.playAnim("H_fall")):this.jetR?(this.node.width=75,this.node.height=100,this.playAnim("H_inAir"),this.anim.node.scaleX=1):this.jetL?(this.node.width=75,this.node.height=100,this.playAnim("H_inAir"),this.anim.node.scaleX=-1):20<this.Rigid.linearVelocity.dot(cc.p(1,0))?(this.node.width=75,this.node.height=100,this.playAnim("H_inAir"),this.anim.node.scaleX=1):(this.node.width=75,this.node.height=100,this.playAnim("H_inAir"),this.anim.node.scaleX=-1):this.jetR?(this.node.width=71,this.node.height=95,this.playAnim("H_run"),this.anim.node.scaleX=1):this.jetL?(this.node.width=71,this.node.height=95,this.playAnim("H_run"),this.anim.node.scaleX=-1):(this.node.width=43,this.node.height=90,this.playAnim("H_idle"))},project:function(t,i){return i.mul(t.dot(i)/i.dot(i))},playAnim:function(t){this.anim.getAnimationState(t).isPlaying||this.anim.play(t)},onBeginContact:function(t,i,o){var e=t.getWorldManifold(),s=this.Rigid.getLinearVelocityFromWorldPoint(e.points[0]),n=o.body.getLinearVelocityFromWorldPoint(e.points[0]),h=s.sub(n);"Grabable"==o.node.group&&(this.InAir=!1),2<h.dot(cc.p(0,1))&&"Grabable"==o.node.group&&(t.disabled=!0,this.InAir=!0),this.rope.height==this.Rope.maxHeight&&(this.InAir=!0),"P_conveyer"==o.node.name&&(this.conveyer=o.node,this.P_conMove=!0),"P_spring"==o.node.name&&0==this.InAir&&(o.node.getChildByName("plat").getComponent(cc.Animation).play(),this.Rigid.linearVelocity=cc.p(0,1e3))},conveyerMove:function(){if(this.P_conMove&&0==this.InAir){console.log(this.P_conMove);var t=this.conveyer.getComponent("P_conveyer");t.right?this.node.x+=.95*t.speed:this.node.x-=.95*t.speed}},onLoad:function(){this.setListener(),this.over=!1,this.Rigid=this.node.getComponent(cc.RigidBody),this.Rigid.enabledContactListener=!0,this.Rope=this.rope.getComponent("Rope"),this.InAir=!0,this.anim=this.getComponent(cc.Animation)},start:function(){},update:function(t){this.jetLaunch(t),this.node.rotation=0,this.Anim(),this.conveyerMove()}}),cc._RF.pop()},{}],Hook:[function(t,i,o){"use strict";cc._RF.push(i,"4e88bRcYsNIAaBiDmZyVr5z","Hook"),cc.Class({extends:cc.Component,properties:{normalHeight:0,rope:cc.Node},start:function(){},update:function(t){var i=this.rope.getComponent("Rope"),o=this.rope.height*this.rope.scaleY*Math.cos(i.rad)+this.rope.position.x,e=this.rope.height*this.rope.scaleY*Math.sin(i.rad)+this.rope.position.y;this.node.position=cc.p(o,e),this.node.rotation=90-i.deg,0==this.rope.height?this.node.height=0:this.node.height=this.normalHeight}}),cc._RF.pop()},{}],JoyStick:[function(t,i,o){"use strict";cc._RF.push(i,"fa78cIVb3tA2rtajwdpq/HY","JoyStick"),cc.Class({extends:cc.Component,properties:{bottom:cc.Node,top:cc.Node},setPosition:function(){this.realWidth=cc.director.getVisibleSize().width,this.realHeight=cc.director.getVisibleSize().height,this.node.x=-this.realWidth/2+128,this.node.y=-this.realHeight/2+128},setListener:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this)},onTouchStart:function(t){this.top.x=t.getLocationX()-128,this.top.y=t.getLocationY()-128,this.boundDetect()},onTouchEnd:function(){this.top.position=cc.p(0,0),this.dir=cc.pSub(this.top.position,this.bottom.position)},boundDetect:function(){this.dir=cc.pSub(this.top.position,this.bottom.position),this.dir.mag()>=this.bottom.width/2&&(this.top.position=this.dir.normalize().mul(this.bottom.width/2))},onLoad:function(){this.setListener(),this.setPosition()},start:function(){},update:function(t){}}),cc._RF.pop()},{}],MenuButtons:[function(t,i,o){"use strict";cc._RF.push(i,"f24575jfhVNNaTg43IpPzo2","MenuButtons"),cc.Class({extends:cc.Component,properties:{text:cc.Prefab},Play:function(){cc.director.loadScene("Game")},Help:function(){var t=cc.instantiate(this.text);t.zIndex=10,this.node.addChild(t),t.setPosition(0,90)},Exit:function(){cc.director.end()},start:function(){}}),cc._RF.pop()},{}],P_conveyer:[function(t,i,o){"use strict";cc._RF.push(i,"453b0gbasZKv4qMnNe9I9DV","P_conveyer"),cc.Class({extends:cc.Component,properties:{speed:0},onLoad:function(){0<cc.randomMinus1To1()?(this.node.getChildByName("plat").scaleX=-1,this.right=!0):this.right=!1,this.anim=this.node.getChildByName("plat").getComponent(cc.Animation),this.animState=this.anim.play("P_conveyer"),this.animState.speed=this.speed},start:function(){}}),cc._RF.pop()},{}],P_move:[function(t,i,o){"use strict";cc._RF.push(i,"b7018T9yjdO3aJUl6zamfCM","P_move"),cc.Class({extends:cc.Component,properties:{speed:0,distance:0},move:function(){var t=cc.pDistance(this.node.getPosition(),this.startPosition);1==this.dir?(this.node.x+=this.speed*Math.cos(this.rad),this.node.y+=this.speed*Math.sin(this.rad)):(this.node.x-=this.speed*Math.cos(this.rad),this.node.y-=this.speed*Math.sin(this.rad)),t>=this.distance&&(this.dir*=-1,this.startPosition=this.node.getPosition())},onLoad:function(){var t=Math.PI;this.node.x<=0?this.rad=t/2*cc.randomMinus1To1():this.rad=t-t/2*cc.randomMinus1To1(),this.dir=1,this.startPosition=this.node.getPosition()},start:function(){},update:function(t){this.move()}}),cc._RF.pop()},{}],P_rotation:[function(t,i,o){"use strict";cc._RF.push(i,"71b04ZZT3NFxY3I00jds3c3","P_rotation"),cc.Class({extends:cc.Component,properties:{rotationSpeed:0},onLoad:function(){this.windowSize=cc.director.getWinSizeInPixels(),this.xOffset=.5*this.windowSize.width,this.yOffset=570/1146*this.windowSize.height,this.time=0,this.x=this.node.x+this.xOffset,this.y=this.node.y+this.yOffset,this.Maxx=this.x+this.node.width/2,this.Minx=this.x-this.node.width/2,this.Maxy=this.y+this.node.height/2,this.Miny=this.y-this.node.height/2,this.p=cc.p(this.x,this.y),this.p1=cc.pSub(cc.p(this.Minx,this.Maxy),this.p),this.p2=cc.pSub(cc.p(this.Maxx,this.Maxy),this.p),this.p3=cc.pSub(cc.p(this.Minx,this.Miny),this.p),this.p4=cc.pSub(cc.p(this.Maxx,this.Miny),this.p)},start:function(){},update:function(t){this.node.rotation=this.time%360,this.time+=this.rotationSpeed,this.rad=cc.degreesToRadians(this.rotationSpeed),this.p1.rotateSelf(-this.rad),this.p2.rotateSelf(-this.rad),this.p3.rotateSelf(-this.rad),this.p4.rotateSelf(-this.rad),this.p1p2=cc.pSub(this.p1,this.p2),this.p3p1=cc.pSub(this.p3,this.p1),this.p4p3=cc.pSub(this.p4,this.p3),this.p2p4=cc.pSub(this.p2,this.p4)}}),cc._RF.pop()},{}],P_spring:[function(t,i,o){"use strict";cc._RF.push(i,"3b53cjLeiRMn43X3jiqmgKr","P_spring"),cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(t){this.node.rotation=0}}),cc._RF.pop()},{}],P_vanish:[function(t,i,o){"use strict";cc._RF.push(i,"93d6b3DZvFJt4Gvdf9qinvw","P_vanish"),cc.Class({extends:cc.Component,properties:{fadeDuration:0,disappearDuration:0},onPreSolve:function(t,i,o){this.vanish&&(t.disabled=!0),console.log("vanish!")},onLoad:function(){this.time=0,this.fade=255/this.fadeDuration,this.vanish=!1,this.node.opacity=0,this.vanish=!0},start:function(){},update:function(t){this.time++;var i=this.time%(2*this.fadeDuration+this.disappearDuration);i>2*this.fadeDuration?(this.node.opacity=0,this.vanish=!0):i>this.fadeDuration?(this.vanish=!1,this.node.opacity=255-(i-this.fadeDuration)*this.fade):(this.vanish=!1,this.node.opacity=i*this.fade)}}),cc._RF.pop()},{}],Platform:[function(t,i,o){"use strict";cc._RF.push(i,"b40b2nHCRpNt5eBh1xQYlAt","Platform"),cc.Class({extends:cc.Component,properties:{rope:{default:null,type:cc.Node}},onLoad:function(){},start:function(){},update:function(t){}}),cc._RF.pop()},{}],Pointer:[function(t,i,o){"use strict";cc._RF.push(i,"a888ahhGLlKcZHWAvW2JfZj","Pointer"),cc.Class({extends:cc.Component,properties:{joyStick:cc.Node,rope:cc.Node,hero:cc.Node},setPosition:function(){var t=this.joyStick.getComponent("JoyStick").dir;0<t.mag()?(this.node.position=cc.pAdd(t.normalize().mul(85),this.hero.position),this.rad=Math.atan2(t.y,t.x),this.deg=cc.radiansToDegrees(this.rad),this.node.rotation=90-this.deg,this.rope.getComponent("Rope").isFixed()||this.rope.getComponent("Rope").changeDir(this.deg,this.rad)):(this.node.position=cc.pAdd(cc.p(0,85),this.hero.position),this.node.rotation=0,this.rope.getComponent("Rope").isFixed()||this.rope.getComponent("Rope").changeDir(90,Math.PI/2))},onLoad:function(){},start:function(){},update:function(t){this.joyStick.getComponent("JoyStick").boundDetect(),this.setPosition()}}),cc._RF.pop()},{}],Rope:[function(t,i,o){"use strict";cc._RF.push(i,"41f2e0VHgJChqxcK7bq0VzR","Rope");var s=cc.Enum({extendS:-1,extendF:-1,shrinkS:-1,shrinkF:-1,fixed:-1});cc.Class({extends:cc.Component,properties:{Speed:0,maxHeight:0,minLength:0,detectStep:0,hero:{default:null,type:cc.Node},platforms:{default:[],type:[cc.Node]},canvas:cc.Node},setListener:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.space:this.state==s.shrinkF?this.state=s.extendS:this.state==s.extendF?this.state=s.shrinkS:this.state==s.fixed&&(this.state=s.shrinkS,this.fixedX=null,this.fixedY=null,this.changeFixPoint=0)}},onKeyUp:function(t){},launch:function(){this.state==s.shrinkF?this.state=s.extendS:this.state==s.extendF?this.state=s.shrinkS:this.state==s.fixed&&(this.state=s.shrinkS,this.fixedX=null,this.fixedY=null,this.changeFixPoint=0,this.connectedPlatform=null)},setFixed:function(){this.state=s.fixed},isFixed:function(){return this.state==s.fixed},changeDir:function(t,i){this.state!=s.shrinkS&&(this.node.rotation=90-t,this.deg=t,this.rad=i)},fixUpdate:function(){if(this.state==s.fixed){var t=this.hero.getComponent(cc.RigidBody);this.fixedPoint=cc.p(this.fixedX,this.fixedY),this.dir=cc.pSub(this.fixedPoint,this.hero.position),this.rad=Math.atan2(this.dir.y,this.dir.x),this.deg=cc.radiansToDegrees(this.rad),this.changeDir(this.deg,this.rad);var i=this.hero.getComponent("Hero");if(this.grativity=cc.p(0,320*-t.getMass()),this.dir.mag()<=this.node.scaleY*this.maxHeight)this.node.height=this.dir.mag()/this.node.scaleY;else if(this.node.height=this.maxHeight,i.InAir){this.removeRadialV(t,this.dir),1==i.jetL?this.HoriPower=cc.p(-i.jetPower,0):1==i.jetR?this.HoriPower=cc.p(i.jetPower,0):this.HoriPower=cc.p(0,0);var o=cc.pAdd(this.project(this.HoriPower,this.dir),this.project(this.grativity,this.dir)).neg();o.dot(this.dir)<=0&&(o=cc.p(0,0)),this.removeRadialV(t,this.dir),t.applyForceToCenter(o,!0),this.removeRadialV(t,this.dir)}else{var e=this.dir.mul(this.dir.mag()-this.maxHeight*this.node.scaleY);e.dot(this.dir)<=0&&(e=cc.p(0,0)),t.applyForceToCenter(e,!0)}}},Extend:function(t){if(this.state==s.extendS)if(this.node.height<=this.maxHeight){for(var i=0;i<this.detectStep;i++)if(this.node.height+=this.Speed/this.detectStep,null!==(this.connectedPlatform=this.canvas.getComponent("Game").collisionDetect()))return}else this.state=s.shrinkS},Shrink:function(t){this.state==s.shrinkS&&(this.node.height>this.minLength?this.node.height-this.Speed<this.minLength?this.node.height=this.minLength:this.node.height-=this.Speed:this.state=s.shrinkF)},fix:function(){this.state==s.fixed&&0==this.changeFixPoint&&(this.fixedX=this.node.height*this.node.scaleY*Math.cos(this.rad)+this.hero.position.x,this.fixedY=this.node.height*this.node.scaleY*Math.sin(this.rad)+this.hero.position.y,this.changeFixPoint=1)},project:function(t,i){return i.mul(t.dot(i)/i.dot(i))},removeRadialV:function(t,i){if(.01<=i.mag()-this.maxHeight*this.node.scaleY){var o=i.normalize().mul(this.maxHeight*this.node.scaleY);this.hero.setPosition(cc.pSub(this.fixedPoint,o)),t.linearVelocity.dot(i)<0&&t.applyLinearImpulse(this.project(t.linearVelocity,i).neg().mul(.5*t.getMass()),this.hero.position)}},specialPlatformAlgorithm:function(){if(this.isFixed())switch(this.connectedPlatform.name){case"P_move":var t=this.connectedPlatform.getComponent("P_move");1==t.dir?(this.fixedX+=t.speed*Math.cos(t.rad),this.fixedY+=t.speed*Math.sin(t.rad)):(this.fixedX-=t.speed*Math.cos(t.rad),this.fixedY-=t.speed*Math.sin(t.rad));break;case"P_conveyer":var i=this.connectedPlatform.getComponent("P_conveyer");i.right?this.fixedX+=.95*i.speed:this.fixedX-=.95*i.speed,(this.fixedX-this.connectedPlatform.x>this.connectedPlatform.width/2+320||this.fixedX-this.connectedPlatform.x<-this.connectedPlatform.width/2+320)&&this.launch();break;case"P_rotation":var o=this.connectedPlatform.getComponent("P_rotation"),e=this.connectedPlatform.x+this.xOffset,s=this.connectedPlatform.y+this.yOffset,n=cc.p(e,s),h=cc.pSub(cc.p(this.fixedX,this.fixedY),n);h.rotateSelf(-o.rad),this.fixedX=cc.pAdd(h,n).x,this.fixedY=cc.pAdd(h,n).y;break;case"P_vanish":this.connectedPlatform.getComponent("P_vanish").vanish&&this.launch()}},onLoad:function(){this.setListener(),this.state=s.shrinkF,this.changeFixPoint=0,this.connectedPlatform=null,this.windowSize=cc.director.getWinSizeInPixels(),this.xOffset=.5*this.windowSize.width,this.yOffset=570/1146*this.windowSize.height},start:function(){},update:function(t){this.Extend(),this.Shrink(),this.fix(),this.specialPlatformAlgorithm(),this.fixUpdate(),this.node.position=this.hero.position}}),cc._RF.pop()},{}],Score:[function(t,i,o){"use strict";cc._RF.push(i,"14857p41N9C2rDBXVbbhceh","Score"),cc.Class({extends:cc.Component,properties:{camera:cc.Node},setPosition:function(){this.realWidth=cc.director.getVisibleSize().width,this.realHeight=cc.director.getVisibleSize().height,this.node.x=-this.realWidth/2+50,this.node.y=this.realHeight/2-40},updateScore:function(){this.camera.y-480>this.score&&(this.score=Math.floor(this.camera.y-480)),this.getComponent(cc.Label).string="Score:"+this.score+"M"},onLoad:function(){this.setPosition(),this.score=0},start:function(){},update:function(t){this.updateScore()}}),cc._RF.pop()},{}]},{},["Audio","Game -menu","Game","Graphic","Camera-menu","Camera","Hero","Hook","Platform","Rope","P_conveyer","P_move","P_rotation","P_spring","P_vanish","ButtonHome","ButtonP","ButtonReplay","ButtonsL","ButtonsR","ButtonsU","JoyStick","Pointer","Score","BackgroundAnim","Close","MenuButtons"]);